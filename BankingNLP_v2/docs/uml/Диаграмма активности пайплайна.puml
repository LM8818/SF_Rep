@startuml
!theme spacelab
title Пайплайн обработки данных в Banking NLP v2.0

start
:Загрузка данных (из БД, CSV или генерация);
note right: Источник данных может быть\nбаза, файл или синтетика

:Валидация схемы (Pydantic);
note right: Проверка структуры и типов данных

:Очистка, анонимизация, нормализация;
note left: Удаление персональных данных,\nприведение к единому формату

partition "Извлечение признаков" {
  :TF-IDF и другие текстовые признаки;
  :Временные признаки (дата, время, длительность);
}

partition "Машинное обучение" {
  :Инференс малой LLM (Phi-2, Mistral, Llama-2 7B);
  note right: Классификация тематики и эмоций\nс помощью локальной LLM
  :Обучение/дообучение модели;
  :Сохранение версии модели;
}

:Оценка качества (accuracy, F1, стоимость ошибки);
note left: Сравнение с эталонными метриками,\nвыявление дрейфа

partition "Интеграции" {
  :Синхронизация с CRM;
  :Выгрузка в DWH;
  :Отправка алертов в Security Center;
}

stop
@enduml
