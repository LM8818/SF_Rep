@startuml
!theme spacelab
title Banking NLP v2.0: Пайплайн обработки данных
skinparam handwritten false
skinparam roundcorner 20
skinparam shadowing true
skinparam BackgroundColor #F8FBFF
skinparam ArrowColor #1E88E5
skinparam ActivityStartColor #4CAF50
skinparam ActivityEndColor #FF9800
skinparam ActivityBackgroundColor #E3F2FD
skinparam ActivityBorderColor #1976D2
skinparam ActivityFontColor #0D47A1
skinparam ActivityFontSize 12
skinparam ActivityFontStyle bold

start
:📥 Загрузка данных из БД/CSV/генерация;
note right: Поддержка множественных источников
:✅ Валидация схемы (Pydantic);
:🧹 Очистка ➜ анонимизация ➜ нормализация;
note left: Соответствие требованиям ИБ

partition "🔧 Feature Engineering" #LightBlue {
  :📊 TF-IDF & текстовые признаки;
  :📅 Дата-временные признаки;
  :💼 Банковские метрики;
}

partition "🤖 Machine Learning" #LightGreen {
  :🎯 Обучение модели (sklearn);
  :💾 Сохранение версии → /models;
  :📈 Валидация качества;
}

:🔮 Инференс новых разговоров;
:📊 Оценка (accuracy, F1, cost);

partition "🔗 Интеграции" #LightYellow {
  :📞 Sync → CRM;
  :🏦 Push → DWH;
  :🚨 Alert → Security Center;
}

stop
@enduml
